Ingredients
1 large, stale loaf crusty sourdough bread (about 1 1/4 pounds), cut into 1/3-inch slices 
8 tablespoons (4 ounces) unsalted butter, divided 
2 tablespoons extra-virgin olive oil 
4 pounds (about 5 large) yellow onions, thinly sliced 
Fine sea salt 
2 tablespoons white-wine vinegar 
¼ cup white wine or dry vermouth 
5 to 6 cups chicken stock, preferably homemade 
12 ounces Gruyère cheese, grated (about 3 cups) 
3 ounces Parmesan, finely grated (about 1 1/3 cups) 
Freshly ground black pepper 